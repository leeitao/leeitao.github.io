function OpenStreetMapNominatimGeocoder(){}OpenStreetMapNominatimGeocoder.prototype.geocode=function(e){var i="http://nominatim.openstreetmap.org/search?";var t="format=json&q="+e;var a=i+t;return Cesium.loadJson(a).then(function(e){var i;return e.map(function(e){i=e.boundingbox;return{displayName:e.display_name,destination:Cesium.Rectangle.fromDegrees(i[2],i[0],i[3],i[1])}})})};var viewer=new Cesium.Viewer("cesiumContainer",{imageryProvider:new Cesium.WebMapServiceImageryProvider({url:"./GlobalTMS",layers:"LocalTMS"}),animation:true,baseLayerPicker:false,geocoder:false,timeline:true,sceneModePicker:false,navigationHelpButton:false,infoBox:true,vrButton:false,homeButton:true,geocoder:new OpenStreetMapNominatimGeocoder});viewer.scene.globe.depthTestAgainstTerrain=true;viewer._cesiumWidget._creditContainer.style.display="none";viewer.extend(Cesium.viewerCesiumNavigationMixin,{});Cesium.Camera.DEFAULT_VIEW_RECTANGLE=Cesium.Rectangle.fromDegrees(80,22,130,50);viewer.scene.globe.enableLighting=true;viewer.scene.fog.enabled=true;viewer.shadows=true;var d=new Date;var hour=0-d.getTimezoneOffset();viewer.animation.viewModel.timeFormatter=function(e,i){var t=Cesium.JulianDate.addMinutes(e,hour,new Cesium.JulianDate);var a=Cesium.JulianDate.toGregorianDate(t);var r=Math.round(a.millisecond);if(Math.abs(i._clockViewModel.multiplier)<1){return Cesium.sprintf("%02d:%02d:%02d.%03d;",a.hour,a.minute,a.second)}return Cesium.sprintf("%02d:%02d:%02d GMT+8",a.hour,a.minute,a.second)};function toDate(e,i,t,a){var r=Cesium.JulianDate.fromDate(new Date(e,i,t,a));var n=Cesium.JulianDate.addSeconds(r,86400,new Cesium.JulianDate);viewer.clock.startTime=r.clone();viewer.clock.stopTime=n.clone();viewer.clock.currentTime=r.clone();viewer.clock.clockRange=Cesium.ClockRange.LOOP_STOP;viewer.clock.multiplier=1e3;viewer.timeline.zoomTo(r,n)}var ChunFen=document.getElementById("ChunFen");ChunFen.onclick=function(){toDate(2017,2,21,8)};var XiaZhi=document.getElementById("XiaZhi");XiaZhi.onclick=function(){toDate(2017,5,22,8)};var QiuFen=document.getElementById("QiuFen");QiuFen.onclick=function(){toDate(2017,8,23,8)};var DongZhi=document.getElementById("DongZhi");DongZhi.onclick=function(){toDate(2017,11,22,8)};var layers=viewer.imageryLayers;var GlobalTMS=layers.addImageryProvider(Cesium.createTileMapServiceImageryProvider({url:"./GlobalTMS",credit:"离线本地TMS影像瓦片"}));viewer.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({url:"http://t0.tianditu.com/cia_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles",layer:"tdtImgAnnoLayer",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible",show:false}));viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(114.6352161367,37.8933088638,1546.0000313)});function createModelXTZ(e,i){var t=Cesium.Cartesian3.fromDegrees(114.6352161367,37.8933088638,i);var a=Cesium.Math.toRadians(0);var r=0;var n=0;var o=new Cesium.HeadingPitchRoll(a,r,n);var l=Cesium.Transforms.headingPitchRollQuaternion(t,o);var m=viewer.entities.add({name:e,position:t,orientation:l,model:{uri:e}})}for(i=0;i<17;i++){if(i<10){createModelXTZ("./Data/0"+[i]+".gltf",0)}else{createModelXTZ("./Data/"+[i]+".gltf",0)}}